# Situation Calculus 
## Example
### Non fluents
- $Item(x)$ indicates that x is an item
- $Right(x_1, x_2)$ indicates that cell $x_2$ is on the right of $x_1$
- $Exit(x)$ denotes that cell $x$ is an exit
Those are non-fluents, so they will not change
### Fluents
- $AgentAt(x)$ Agent is at cell $x$
- $AgentHas(x)$ Agent has item $x$ with itself
- $ItemAt(x,y)$ Item $x$ is at cell $y$
THese are fluents, so they may change during the execution of an action
### Actions
- $move(x)$ Agent moves in position x. It can only do this if cell $x$ is next to the right of the cell where the agent currently is.
- $drop()$ Agent will drop in the current location all the items it has with itself
- $exit()$ Allows the agent to exit the map. It can do that only if it's in an exit cell and and has all items with itself
### Initial Situation
Cells are ordered $A | B | C | D$, where $A$ is the initial position of the agent, and $D$ is the exit position. In cell $B$ there is a $\bigcirc$ and in $C$ there is a $\bigtriangleup$.
## Problem (Basic Action Theories)
Initial situation
$KB \rightarrow I \models KB$
$D_0$: set of formulas describing the initial situation
$D_0 = \{AgentAt(A,s_0)\}$. This does not prevent to have another predicate adding the agent to another cell! We'll resolve by $$AgentAt(A,s_0) \wedge \forall x(AgentAt(x,s_0) \supset x = A)$$
> [!NOTE]
> The first predicament $AgentAt(A,s_0)$ is necessary, since implication means that if the first part is $False$, then the implication returns $True$!

$$\forall x AgentAt(x,s_0) \leftrightarrow x=A$$ is also good!
We'll continue to formulate every fluent and non-fluent of the initial situation (we are in an open-world situation, so we need to be specific about our domain, or we may go into an interpretation which doesn't follow the specification)
$D_0 =$
- $\{\forall x. AgentAt(x,s_0) \leftrightarrow x=A$
- $\forall x.ItemAt(x,y,s_0) \leftrightarrow (x=\bigcirc \wedge y = B) \vee (x=\bigtriangleup \wedge y = C)$
- $\forall x. \neg AgentHas(x, s_0)$
- $\forall x.Item(x) \leftrightarrow (x = \bigcirc \vee x = \bigtriangleup)$
- $\forall x.Exit(x) \leftrightarrow x=D$
- $\forall x_1 \forall x_2 Right(x_1, x_2) \leftrightarrow ( x_1 = A \wedge x_2 = B) \vee ( x_1 = B \wedge x_2 = C) \vee ( x_1 = C \wedge x_2 = D)$ 

We'll create our knowledge base in its entirety $D$:
$$D = \Sigma \cup D_0 \cup$$
### Precondition Axioms
- $move(x)$ can be executed in situation $s$ if in $s$ the agent is in some cell $y$ such that $x$ is next to the right of $y$. We can translate it in FOL:
$$Poss(move(x), s) \leftrightarrow \exists y.AgentAt(y, s) \wedge Right(y,x)$$
- $drop()$ can be executed always, so
$$Poss(drop(), s) \leftrightarrow True$$
- $exit()$ we'll do the same thing with move. Action can be done if agent is in an exit cell and the agent has all items with itself.
$$
Poss(exit(), s) \leftrightarrow (\exists y.AgentAt(y,s) \wedge Exit(y)) \wedge (\forall z. Item(z) \rightarrow AgentHas(z,s))
$$

The precondition axioms are all taken in the $D_{AP}$ set, which is the Domain Action Precondition Axioms set.
$$
D_{AP} = \{\}
$$