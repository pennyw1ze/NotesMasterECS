# Basic Action Theory
Based on the set of axioms:
$$
D=\Sigma \cup D_{UNA} \cup D_{s_0} \cup D_{AP} \cup D_{SSA}
$$
blah blah blah

| A   | $s_0$            |
| --- | ---------------- |
| B   | `do(move(B),s0)` |
| D   | `do(move(D),s0)` |
These relationships are infinte, becase we may have action sequences of any length. We can drop 
## Regression
Way to transform a formula of future situation into a formula about the initial situation.
For example, the following formula $AgentAt(B, do(move(C,do(move(B,do(move(A,S_0)))$ can be expressed as a series of actions that will make the agent move $A \rightarrow B \rightarrow C \rightarrow B$, which we know it can't be possible.

We will create that formula as $\phi(B,s_3)$ and we'll regress it $R[\phi(B,s_3)] = \phi'(..., s_0)$. Now $\phi'$ can be evaluated on the first state ($D\models \phi'$) This is thanks to the **Regression Operator**:
- If $\phi$ is a situation independet atom, which mentions a non-fluent, then $R[\phi] = \phi$
- If $\phi$ is a (relational) fluent of the form $F(x, s_0)$ then $R[\phi] = \phi$
- If $\phi$ has the form $Poss(A(t), \sigma)$ with precondition axiom $Poss(A(t), \sigma) \leftrightarrow \pi_A(t,s)$ (with $\sigma$ the situation term$do(A(x_a),do(...,s_0))$) then  $R[\phi] = R[\pi_A(t, \sigma)]$ 
	- $\phi = Poss(move(B), do(drop(), s_0))$ 
	- $\sigma = do(drop(), s_0)$ with $\pi_A$ being $\exists y. AgentAt(y,s) \wedge Right(y,x)$
	- $R[\phi]= R[\exists y. AgentAt(y,do(drop(),s_0)) \wedge Right(y,B)]$
- If $\phi$ is a (relational) atom of the form $F(x, do(\alpha, \sigma))$, with $\alpha$ being action term and $\sigma$ the situation term with SSA $F(x,do(a, s)) \leftrightarrow \Phi_F(x,a,s)$ 
	  Example:
	  $\phi = AgentAt(B,do(move(B),S_0)), \alpha = move(B)$ and $\sigma = S_0$.
	  We will have:$$R[F(x,do(\alpha,\sigma)] = R[\Phi_F(x,\alpha,\sigma)]$$
	  So "do" does not occur in the new formula, which is apparently good for us!
	  So, back to the example we have that:$$AgentAt(x,do(a,s))\iff a=move(x)\vee AgentAt(x,s)\wedge \neg (\exists y.a= move(y)\wedge x\neq y \wedge AgentAt(x,s) \vee (a=exit()\wedge AgentAt(x,s)) $$
	  $$R[AgentAt(B,do(move(B),S_0)] = R[a = move(B) \vee \neg (\exists y.a = move(y)\wedge B\neq y \wedge AgentAt(B,S_0) \vee (move(B)=exit()\wedge AgentAt(B,S_0))]$$
	  So we replace x with B, a with move(B) and s with S0 in the SSA, we will end up with the right regressive axiom.
- We have seen just atomic formulas now, so we will check for combined
- If $\phi = \neg \psi$, then $R[\phi] = \neg R[\psi]$ 
- If $\phi = \exists x. \psi$ then $R[\phi] = \exists x.R[\psi]$
- if $\phi = \gamma [\vee / \wedge] \psi$ then $R[\phi] = R[\gamma] [\vee / \wedge] R[\psi]$ 
- If $\phi = \forall x. \psi$ => $\neg \exists x. \neg \psi$  then $R[\phi] = R$
#### Example
$\phi = \exists x. AgentAt(x, do(B, s_0)) \wedge \exists z. RightOf(x,z)$ 
$R[\phi]$ will be the _regression_ of $\phi$
$\phi = \exists x.\gamma \wedge \exists z. \delta \rightarrow R[\phi] =  \exists x.R[\gamma] \wedge  \exists z. R[\delta]$ 

$R[ AgentAt(x, do(B, s_0))] =  R[move(B)= move(B) \vee (AgentAt(B, s_0) \wedge \neg (\exists y.move(y) \wedge B \neq y \wedge  ...)]$ 
Since the second part ($AgentAt(B, s_0)$) is false, we know that $R[(AgentAt(B, s_0)] = R[move(B)] = move(B) = move(B)$ which is true.
> [!WARNING]
> We need to follow the lecture from the first break point

## regression theorem
if $\phi$ is a *regressable formula* 
$D \models \phi \implies D_{s_0} \cup D_{una} \models R[\phi]$  
This gets rid of every thing about situations, action preconditions and successor state axioms !

