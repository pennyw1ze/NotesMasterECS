# **Intro**

A **blockchain is** a distributed ledger that can record transactions in an immutable, verifiable and permanent way.

What transactions are recorded and in which order (CONSENSUS)?
❏ permissioned
❏ permissionless

Who can read the transaction written in chain or make new proposals?
❏ private
❏ public

The main difference with a bank consists basically in the decentralization of the process:
Centralized process needs
TRUST

Decentralized process needs
CONSENSUS from the Society


##### Block processing
How does a block get into the blockchain ?
1. Transaction request is performed by a node;
2. Transaction is broadcasted trough the network;
3. Validators check the transaction;
4. Verified transaction is added to a block;
5. Block is added to the blockchain;

It is not guaranteed that different nodes has the same view.

##### Proper use of blockchain
When to use the blockchain ?
![[Pasted image 20250618165021.png]]

In [this](https://www.law.berkeley.edu/wp-content/uploads/2018/08/Do-you-need-a-Blockchain-Karl-Wust-and-Arthur-Gervais.pdf) paper you will find more details about the proper use of blockchain as a solid alternative to the centralized systems.


##### Oracles
Oracles are components that allow a blockchain, or a smart contract, to get inputs from  utside the blockchain. They inject data coming from outside the blockchain into regular  lockchain transactions. In this way, they become part of the blockchain history and can be handled deterministically by all blockchain nodes.

---
# **Tech Ingredients**

The main technologies implemented in the blockchain are:
- **Asymmetric encryption;**
- **Hash functions;**
- **Merkle trees;**
- **Key-value database;**
- **P2P comunication protocol;**
- **Proof of work/stake/whatever;**
We will analyze this technologies in detail.

#### Hash functions
We need fast to compute hash functions.
We also need collision resistant hash functions.
For this purpose we will use **cryptographic hashing functions** which are:
- **Collision resistant**: hard to find collisions;
- **Difficult to invert**: given the image of the function is hard to guess the pre-image;

In blockchain, hashing functions are used for:
- Chaining blocks;
- Commitment;
- Hash Puzzles (PoW);
- Merkle trees;
- Signature;
- Authenticity and integrity;

#### Key-value database
The only way I have to verify the integrity of the blockchain is to download the whole blockchain and check.
However, once the check is done and I’m confident it is all ok, I can use ad-hoc data structures and tool to facilitate the computation.
Also we have apis that can access easilty blockchain informations and are called trough RPCs.


#### Asymmetric encryption
How is asymmetric encryption used ?
In the bitcoin blockchain:
	- Addresses are Public Keys;
	- Addresses in bitcoin transactions are public;
	- The blockchain can be analyzed to link transactions to real people: i.e. identities;
	- A bitcoin address per se doesn't say anything about you, but your transaction history does;
	- Create new personal addresses is free;
Wallet address are public keys, private keys are using to show ownership and perform payments.
Verifiers blocks, as well as nodes that performs a transaction, sign the block/transaction, and for the digital signature the asymmetric encryption paradigm is adopted.
inputs

#### Transactions
To spend or unlock a Bitcoin **UTXO**(Unspent Transaction Output), you typically follow these steps:
1. Create a transaction: Include the UTXO as an input;
2. Specify the recipient's address and the amount to send;
3. Sign the transaction with the private key corresponding to the input UTXO;
4. Broadcast the transaction to the Bitcoin network;
A transactions is made up of fields, each contains bytes of data.
It contains some fields, such as version, marker, flag, but the most important are:
- **Inputs**: contains the TXID, the id of the transaction containing the output you want to spend, scriptsig field which contains the unlocking code for the output referenced;
- **Outputs**: This outputs are new batch of bitcoins generated by the transaction. Each batch contains the amount of money in it, and the public key that locks the output block (the wallet adress of the receiver basically);
TXID is the id of the transactions refered in other transaction and is created as follows:

```
TXID = HASH256([version][inputs][outputs][locktime])
```

What remains after the input value was spent and the output value was given, is the fee value which is splitted to the miner of the block and the validators.

##### UTXOs
UTXOs are unspent transactions output that can still be consumed as input.
Keeping track of UTXOs is useful for two reasons:

1. [Validating transactions](https://learnmeabitcoin.com/technical/transaction/utxo/#validating-transactions)
2. [Calculating address balances](https://learnmeabitcoin.com/technical/transaction/utxo/#calculating-address-balances)

The UTXO are stored in the chainstate database.This is a separate database that get  stored in memory (RAM).
When a UTXO is spent, it is marked as **spent** by being referenced as an **input** in a new transaction. Here's how it's handled:

1. **Every node** keeps a database of all current UTXOs (Unspent Transaction Outputs);
    
2. When a new transaction is validated, the node checks if the inputs refer to UTXOs in that list;
    
3. If valid, the inputs (referenced UTXOs) are **removed** from the UTXO set;
    
4. The outputs of the new transaction are **added** to the UTXO set;

A new address is generated each time you receive bitcoin. Basically the wallet is able to generate different addresses in order to "store" different UTXOs.
This addresses are tracked by the blockchain, but the blockchain has no way to know which wall has generated those addresses.
So the UTXO model is really different from that state model in which the user owns an account.


---
# **Consensus**


---
# **Beyond Transactions**



---
# **Blockchain and IOT**


---
# **Scaling the blockchain**


---